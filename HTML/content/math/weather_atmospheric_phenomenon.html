<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cymatics Pattern Explorer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .control-panel, .visualization, .properties {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .visualization {
            text-align: center;
        }
        input[type="range"] {
            width: 100%;
            margin-bottom: 10px;
        }
        .properties {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        h1 {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Cymatics Pattern Explorer</h1>

    <div class="visualization">
        <svg id="cymaticsSVG" width="400" height="300">
            <rect width="400" height="300" fill="#f0f4f8" />
        </svg>
    </div>

    <div class="control-panel">
        <div>
            <label for="frequencySlider">Frequency: <span id="frequencyValue">220</span> Hz</label>
            <input type="range" id="frequencySlider" min="20" max="1000" value="220">
        </div>
        <div>
            <label for="amplitudeSlider">Amplitude: <span id="amplitudeValue">50</span>%</label>
            <input type="range" id="amplitudeSlider" min="0" max="100" value="50">
        </div>
        <div>
            <label for="nodesSlider">Nodes: <span id="nodesValue">4</span></label>
            <input type="range" id="nodesSlider" min="1" max="8" value="4">
        </div>
        <div>
            <label>
                <input type="checkbox" id="patternToggle" checked>
                Show Pattern
            </label>
        </div>
    </div>

    <div class="properties">
        <div>
            <p><strong>Wavelength:</strong> <span id="wavelengthValue">1.56</span>m</p>
            <p><strong>Period:</strong> <span id="periodValue">4.55</span> ms</p>
        </div>
        <div>
            <p><strong>Energy Level:</strong> <span id="energyLevelValue">25.0</span>%</p>
            <p><strong>Pattern Speed:</strong> <span id="patternSpeedValue">1.0</span>x</p>
        </div>
    </div>

    <script>
        // Get DOM elements
        const svg = document.getElementById('cymaticsSVG');
        const frequencySlider = document.getElementById('frequencySlider');
        const amplitudeSlider = document.getElementById('amplitudeSlider');
        const nodesSlider = document.getElementById('nodesSlider');
        const patternToggle = document.getElementById('patternToggle');

        // Update value displays
        const frequencyValue = document.getElementById('frequencyValue');
        const amplitudeValue = document.getElementById('amplitudeValue');
        const nodesValue = document.getElementById('nodesValue');
        const wavelengthValue = document.getElementById('wavelengthValue');
        const periodValue = document.getElementById('periodValue');
        const energyLevelValue = document.getElementById('energyLevelValue');
        const patternSpeedValue = document.getElementById('patternSpeedValue');

        // Visualization function
        function generateCymaticsPattern(frequency, amplitude, nodes, showPattern) {
            // Clear previous SVG contents
            while (svg.firstChild) {
                svg.removeChild(svg.firstChild);
            }

            // Background
            const background = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            background.setAttribute('width', '400');
            background.setAttribute('height', '300');
            background.setAttribute('fill', '#f0f4f8');
            svg.appendChild(background);

            if (!showPattern) return;

            const centerX = 200;
            const centerY = 150;
            const baseRadius = 100;
            const radians = 2 * Math.PI / nodes;

            // Create base polygon points
            const points = Array.from({length: nodes}, (_, i) => {
                const angle = i * radians;
                const x = centerX + baseRadius * Math.cos(angle);
                const y = centerY + baseRadius * Math.sin(angle);
                return `${x},${y}`;
            });

            // Add oscillation based on frequency and amplitude
            const oscillationFactor = Math.sin(Date.now() * 0.01 * frequency) * (amplitude / 50);
            const oscillatedPoints = points.map(pointStr => {
                const [x, y] = pointStr.split(',').map(Number);
                const dx = x - centerX;
                const dy = y - centerY;
                const distance = Math.sqrt(dx*dx + dy*dy);
                const newDistance = distance + (oscillationFactor * 50);
                const angle = Math.atan2(dy, dx);
                return `${centerX + newDistance * Math.cos(angle)},${centerY + newDistance * Math.sin(angle)}`;
            });

            // Base Polygon
            const basePolygon = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
            basePolygon.setAttribute('points', points.join(' '));
            basePolygon.setAttribute('fill', 'none');
            basePolygon.setAttribute('stroke', '#e0e0e0');
            basePolygon.setAttribute('stroke-width', '2');
            svg.appendChild(basePolygon);

            // Oscillating Polygon
            const oscillatedPolygon = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
            oscillatedPolygon.setAttribute('points', oscillatedPoints.join(' '));
            oscillatedPolygon.setAttribute('fill', 'rgba(135, 206, 235, 0.5)');
            oscillatedPolygon.setAttribute('stroke', '#87CEEB');
            oscillatedPolygon.setAttribute('stroke-width', '3');
            svg.appendChild(oscillatedPolygon);

            // Center Point
            const centerPoint = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            centerPoint.setAttribute('cx', centerX);
            centerPoint.setAttribute('cy', centerY);
            centerPoint.setAttribute('r', '5');
            centerPoint.setAttribute('fill', '#FF6347');
            svg.appendChild(centerPoint);

            // Frequency Text
            const frequencyText = document.createElementNS("http://www.w3.org/2000/svg", "text");
            frequencyText.setAttribute('x', '10');
            frequencyText.setAttribute('y', '20');
            frequencyText.setAttribute('fill', '#1F2937');
            frequencyText.textContent = `${frequency} Hz`;
            svg.appendChild(frequencyText);
        }

        // Update properties
        function updateProperties(frequency, amplitude) {
            const speedOfSound = 343; // m/s
            const wavelength = speedOfSound / frequency;
            const period = 1000 / frequency; // ms
            const energyLevel = (frequency * amplitude) / 100;
            const patternSpeed = frequency / 220;

            wavelengthValue.textContent = wavelength.toFixed(2);
            periodValue.textContent = period.toFixed(2);
            energyLevelValue.textContent = energyLevel.toFixed(1);
            patternSpeedValue.textContent = patternSpeed.toFixed(1);
        }

        // Event Listeners
        function updateVisualization() {
            const frequency = Number(frequencySlider.value);
            const amplitude = Number(amplitudeSlider.value);
            const nodes = Number(nodesSlider.value);
            const showPattern = patternToggle.checked;

            // Update displayed values
            frequencyValue.textContent = frequency;
            amplitudeValue.textContent = amplitude;
            nodesValue.textContent = nodes;

            // Generate pattern and update properties
            generateCymaticsPattern(frequency, amplitude, nodes, showPattern);
            updateProperties(frequency, amplitude);
        }

        // Attach event listeners
        frequencySlider.addEventListener('input', updateVisualization);
        amplitudeSlider.addEventListener('input', updateVisualization);
        nodesSlider.addEventListener('input', updateVisualization);
        patternToggle.addEventListener('change', updateVisualization);

        // Initial render
        updateVisualization();

        // Animation loop for dynamic visualization
        function animate() {
            updateVisualization();
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>