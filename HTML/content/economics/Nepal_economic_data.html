<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Economic Profile of Nepal</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <h1 class="text-4xl font-bold mb-6 text-center text-gray-800">
            Economic Profile of Nepal
            <span class="block text-xl text-gray-600 mt-2">Comprehensive Data Analysis</span>
        </h1>

        <!-- Overview Section -->
        <div id="overview" class="bg-white shadow-lg rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">Economic Overview</h2>
            <div id="overview-content" class="grid md:grid-cols-3 gap-4">
                <div class="bg-blue-50 p-4 rounded">
                    <h3 class="font-bold text-lg mb-2">Latest GDP</h3>
                    <p id="latest-gdp" class="text-xl text-blue-700">Loading...</p>
                </div>
                <div class="bg-green-50 p-4 rounded">
                    <h3 class="font-bold text-lg mb-2">GDP Growth Rate</h3>
                    <p id="gdp-growth" class="text-xl text-green-700">Loading...</p>
                </div>
                <div class="bg-purple-50 p-4 rounded">
                    <h3 class="font-bold text-lg mb-2">Population</h3>
                    <p id="total-population" class="text-xl text-purple-700">Loading...</p>
                </div>
            </div>
        </div>

        <!-- Nepali Explanation Section -->
        <div class="bg-white shadow-lg rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">नेपालको आर्थिक विश्लेषण</h2>
            <div class="prose text-gray-700 space-y-4">
                <p>
                    नेपाल एक विकासशील देश हो जसको अर्थव्यवस्था विविध र गतिशील छ। यो डेटा विश्लेषण नेपालको आर्थिक अवस्थाको गहिरो अन्तर्दृष्टि प्रदान गर्दछ। 
                    विगत केही दशकमा, नेपालले महत्वपूर्ण आर्थिक प्रगति देखाएको छ, जसमा सकल घरेलु उत्पादन (GDP), प्रति व्यक्ति आय, र विभिन्न आर्थिक क्षेत्रहरूको योगदान समावेश छ।
                </p>
                <p>
                    कृषि, उद्योग, र सेवा क्षेत्रहरू नेपालको अर्थव्यवस्थाका महत्वपूर्ण आधारहरू हुन्। प्रत्येक क्षेत्रले देशको समग्र आर्थिक विकासमा महत्वपूर्ण भूमिका खेल्दछ। 
                    विदेशी लगानी र सरकारी राजस्व पनि नेपालको आर्थिक वृद्धि र विकासका महत्वपूर्ण सूचकहरू हुन्।
                </p>
                <p>
                    यो डेटाले नेपालको आर्थिक यात्राको एक व्यापक चित्र प्रस्तुत गर्दछ, जसले देशको आर्थिक परिवर्तन र विकासको कथा पोख्दछ। 
                    यसले नेपालको आर्थिक सशक्तीकरण र भविष्यको संभावनाहरूलाई बुझ्न महत्वपूर्ण अन्तर्दृष्टि प्रदान गर्दछ।
                </p>
            </div>
        </div>

        <!-- Glossary Section -->
        <div class="bg-white shadow-lg rounded-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">Economic Terms Glossary</h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <h3 class="font-bold mb-2">GDP (Gross Domestic Product)</h3>
                    <p class="text-gray-700">The total monetary value of all finished goods and services produced within a country's borders in a specific time period.</p>
                    <p class="text-gray-600 italic">नेपाली परिभाषा: एक निश्चित समय अवधिमा देशभित्र उत्पादित सबै अन्तिम वस्तु र सेवाहरूको कुल मौद्रिक मूल्य।</p>
                </div>
                <div>
                    <h3 class="font-bold mb-2">GDP per Capita</h3>
                    <p class="text-gray-700">Total GDP divided by the population, indicating the average economic output per person.</p>
                    <p class="text-gray-600 italic">नेपाली परिभाषा: कुल जीडीपी लाई जनसंख्याले भाग गरेर प्रति व्यक्ति औसत आर्थिक उत्पादन देखाउँछ।</p>
                </div>
                <div>
                    <h3 class="font-bold mb-2">GDP Growth Rate</h3>
                    <p class="text-gray-700">The percentage increase in GDP from one period to another, adjusted for inflation.</p>
                    <p class="text-gray-600 italic">नेपाली परिभाषा: एक अवधिबाट अर्को अवधिमा जीडीपीको मुद्रास्फीति समायोजित प्रतिशत वृद्धि।</p>
                </div>
                <div>
                    <h3 class="font-bold mb-2">Sector Value Added</h3>
                    <p class="text-gray-700">The net output of a sector after accounting for all inputs and intermediate consumption.</p>
                    <p class="text-gray-600 italic">नेपाली परिभाषा: सबै इनपुट र मध्यवर्ती उपभोगलाई हिसाब गरेपछि कुनै क्षेत्रको खुद उत्पादन।</p>
                </div>
                <div>
                    <h3 class="font-bold mb-2">Foreign Direct Investment (FDI)</h3>
                    <p class="text-gray-700">Investment made by a foreign entity into a business located in another country, typically representing a lasting management interest.</p>
                    <p class="text-gray-600 italic">नेपाली परिभाषा: एक विदेशी संस्थाले अर्को देशमा रहेको व्यवसायमा गर्ने लगानी, जसले सामान्यतः एक दीर्घकालीन व्यवस्थापकीय स्वार्थ प्रतिनिधित्व गर्दछ।</p>
                </div>
                <div>
                    <h3 class="font-bold mb-2">Tax Revenue</h3>
                    <p class="text-gray-700">The total income generated by the government through various taxes, expressed as a percentage of GDP.</p>
                    <p class="text-gray-600 italic">नेपाली परिभाषा: सरकारले विभिन्न करहरू मार्फत् उठाएको कुल आय, जुन जीडीपीको प्रतिशतमा व्यक्त गरिन्छ।</p>
                </div>
            </div>
        </div>

        <!-- Detailed Indicators Section -->
        <div id="data-container" class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">Detailed Economic Indicators</h2>
            <div class="text-center">Loading comprehensive data...</div>
        </div>

        <!-- Indicator Explanations -->
        <div id="explanations" class="bg-white shadow-lg rounded-lg p-6 mt-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">Understanding the Data</h2>
            <div id="indicator-explanations" class="space-y-4"></div>
        </div>

        <div class="mt-8 text-center text-sm text-gray-500">
            <p>Data sourced from the World Bank</p>
        </div>
    </div>

    <script>
        // Comprehensive list of economic indicators
        const indicators = [
            { 
                code: 'NY.GDP.MKTP.CD', 
                name: 'GDP (Current US$)', 
                category: 'Economic Output',
                explanation: 'Gross Domestic Product (GDP) represents the total monetary value of all finished goods and services produced within Nepal\'s borders in a specific year. It\'s a key indicator of the country\'s economic size and performance.'
            },
            { 
                code: 'NY.GDP.PCAP.CD', 
                name: 'GDP per capita (Current US$)', 
                category: 'Living Standards',
                explanation: 'GDP per capita is calculated by dividing the total GDP by the population. It provides insight into the average economic output and standard of living for individuals in Nepal.'
            },
            { 
                code: 'SP.POP.TOTL', 
                name: 'Total Population', 
                category: 'Demographics',
                explanation: 'The total number of people living in Nepal. Population data is crucial for understanding economic potential, labor force, and social development.'
            },
            { 
                code: 'NY.GDP.MKTP.KD.ZG', 
                name: 'GDP Growth Rate (%)', 
                category: 'Economic Growth',
                explanation: 'The annual percentage growth rate of GDP, adjusted for inflation. It shows how quickly Nepal\'s economy is expanding or contracting.'
            },
            { 
                code: 'NY.AGR.TOTL.CD', 
                name: 'Agriculture, forestry, and fishing, value added (Current US$)', 
                category: 'Sector Contribution',
                explanation: 'The total value added from agriculture, forestry, and fishing sectors. This highlights the importance of these traditional economic activities in Nepal\'s economy.'
            },
            { 
                code: 'NV.IND.TOTL.CD', 
                name: 'Industry, value added (Current US$)', 
                category: 'Sector Contribution',
                explanation: 'The total value added by industrial sectors, including manufacturing, mining, construction, and utilities. Indicates the strength of Nepal\'s industrial development.'
            },
            { 
                code: 'NV.SRV.TOTL.CD', 
                name: 'Services, value added (Current US$)', 
                category: 'Sector Contribution',
                explanation: 'The total value added by service sectors such as finance, tourism, telecommunications, and other service industries. Reflects the growing importance of services in Nepal\'s economy.'
            },
            { 
                code: 'BX.KLT.DINV.CD.WD', 
                name: 'Foreign Direct Investment, net inflows (Current US$)', 
                category: 'Investment',
                explanation: 'Net inflows of investment to acquire a lasting management interest in an enterprise operating in an economy other than that of the investor. Indicates international confidence in Nepal\'s economic potential.'
            },
            { 
                code: 'GC.TAX.TOTL.GD.ZS', 
                name: 'Tax revenue (% of GDP)', 
                category: 'Fiscal Policy',
                explanation: 'Total tax revenue as a percentage of GDP. Provides insight into the government\'s ability to generate revenue and the overall tax burden in the economy.'
            }
        ];
        
        // Fetch data for multiple indicators
        async function fetchIndicatorData(indicatorCode) {
            const apiUrl = `https://api.worldbank.org/v2/country/NPL/indicator/${indicatorCode}?format=json&per_page=200`;
            const response = await fetch(apiUrl);
            const data = await response.json();
            return data[1] || [];
        }
        
        // Main function to fetch and display data
        async function displayEconomicData() {
            try {
                // Fetch data for all indicators
                const indicatorResults = await Promise.all(
                    indicators.map(indicator => fetchIndicatorData(indicator.code))
                );
        
                // Combine data from different indicators
                const combinedData = {};
                
                indicators.forEach((indicator, index) => {
                    indicatorResults[index].forEach(entry => {
                        const year = entry.date;
                        if (!combinedData[year]) {
                            combinedData[year] = { year };
                        }
                        combinedData[year][indicator.code] = entry.value;
                    });
                });
        
                // Convert to sorted array, newest first
                const sortedData = Object.values(combinedData)
                    .sort((a, b) => b.year - a.year)
                    .slice(0, 30); // Limit to last 30 years
        
                // Update overview section with latest data
                const latestYear = sortedData[0];
                document.getElementById('latest-gdp').textContent = 
                    `$${Number(latestYear['NY.GDP.MKTP.CD']).toLocaleString()}`;
                document.getElementById('gdp-growth').textContent = 
                    `${latestYear['NY.GDP.MKTP.KD.ZG']?.toFixed(2) || 'N/A'}%`;
                document.getElementById('total-population').textContent = 
                    `${Number(latestYear['SP.POP.TOTL']).toLocaleString()}`;
        
                // Create HTML table for detailed indicators
                const tableHtml = `
                    <table class="w-full text-center">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="p-3">Year</th>
                                ${indicators.map(indicator => `
                                    <th class="p-3">
                                        ${indicator.name}
                                        <span class="block text-xs text-gray-600">(${indicator.category})</span>
                                    </th>
                                `).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${sortedData.map(row => `
                                <tr class="border-b hover:bg-gray-50 transition">
                                    <td class="p-3 font-semibold">${row.year}</td>
                                    ${indicators.map(indicator => `
                                        <td class="p-3">
                                            ${row[indicator.code] !== undefined 
                                                ? (indicator.code.includes('ZG') 
                                                    ? row[indicator.code].toFixed(2) + '%'
                                                    : Number(row[indicator.code]).toLocaleString())
                                                : 'N/A'}
                                        </td>
                                    `).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                document.getElementById('data-container').innerHTML = tableHtml;
        
                // Create explanations section
                const explanationsHtml = indicators.map(indicator => `
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="font-bold text-lg mb-2">${indicator.name}</h3>
                        <p class="text-gray-700">${indicator.explanation}</p>
                    </div>
                `).join('');
                document.getElementById('indicator-explanations').innerHTML = explanationsHtml;
        
            } catch (error) {
                // Handle errors
                document.getElementById('data-container').innerHTML = `
                    <div class="text-center text-red-600">
                        Error fetching data: ${error.message}
                    </div>
                `;
                document.getElementById('indicator-explanations').innerHTML = `
                    <div class="text-center text-red-600">
                        Unable to load indicator explanations
                    </div>
                `;
            }
        }
        
        // Call the main function
        displayEconomicData();
    </script>
</body>
</html>